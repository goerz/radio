# Streaming Radio Terminal Client

No more Flash or awkward browser windows consuming memory in order to pipe in your jams. tty_radio supports manual entries you want to import as well as auto-generated entries from SomaFM.

This package wraps your favorite terminal based audio stream player (like mpg123). It provides a RESTful API to control stream selection and playback. Includes a simple text based UI to select stations: banners autogenerated with pyfiglet, and (optionally) album thumbnails converted to ASCII with Pillow. Also serves a web UI at http://localhost:7887, for remote management.


## Install

* Verify you have mpg123
    * else change `stream.mpg123.subp_cmd` to your fav player
    * Whatever you choose must not buffer output
    * For OS X, Homebrew: `brew install mpg123`
    * For Linux, apt: `sudo apt-get install mpg123`
* Optionally, if you want to display album art
    * `pip install pillow`
* Optionally, if you want to scrobble artists and song titles to Last.fm
    * `pip install pylast`
* `pip install git+git://github.com/goerz/radio.git@master#egg=tty_radio`
    * This adds `radio` to your path

## Usage

* `radio` starts the server and terminal UI interface
* `radio server` start the server only
* `radio play`, `radio stop`, `radio toggle`, ... to control a running server from the command line ("scripting interface"). See `radio --help` for details.
* Defaults to a list of favorite channels
    * Auto-generated from a hardcoded value
    * Edit `~/.tty_radio-favs.csv` to add/remove
    * Any changes are permanent (it's not auto updated)
* Select the station to listen to by typing its number (left column) and pressing Enter
* There are other views:
    * At the bottom of the list is a SomaFM view
        * Auto-generated from web scraping updated if more than 7 days old
        * Edit `~/.tty_radio-soma.csv` to add/remove, but you will loose changes on next update
    * The Di.FM view has been removed since they've blocked direct streaming


## Config file

`radio` reads settings from a config file in `~/.tty_radio-settings.ini`. The file is automatically created if it does not exist. Use `radio --show-config` to print the complete active config file.

    [UI]
    compact_titles = yes
    figlet_banners = yes
    confirm_banner_font = no
    theme = auto
    light_theme = light
    fallback_theme = bw
    dark_theme = miami_vice

    [Server]
    volume = 11000
    notify_logfile =
    update_btt_widget = no
    scrobble = no

    [theme_miami_vice]
    stream_name_banner = yellow
    ui_banner = red
    meta_song_name = blue
    stream_exit_confirm = purple
    meta_prefix = blue
    stream_name_confirm = purple
    meta_prefix_str = >>>
    meta_stream_name = blue
    ui_desc = green
    meta_prefix_pad = 1
    ui_names = yellow

    [theme_light]
    stream_name_banner = grey
    ui_banner = purple
    meta_song_name = blue
    stream_exit_confirm = purple
    meta_prefix = blue
    stream_name_confirm = purple
    meta_prefix_str = >>>
    meta_stream_name = blue
    ui_desc = grey
    meta_prefix_pad = 1
    ui_names = blue

    [theme_bw]
    ui_banner = endc
    meta_prefix_pad = 1
    meta_song_name = endc
    stream_name_banner = endc
    meta_stream_name = endc
    meta_prefix = endc
    ui_names = endc
    stream_name_confirm = endc
    stream_exit_confirm = endc
    meta_prefix_str = >>>
    ui_desc = endc

    [Lastfm]
    username = username
    api key = b25b959554ed76058ac220b7b2e0a026
    shared secret = 425b55975eed76058ac220b7b4e8a054
    password hash = 25b5192f9943196a6044ca1b6b1d30c2

    [BTT]
    widget UUID =
    shared secret =



## Dependencies

* For finding channel links from websites, req beautifulsoup4
* For ascii banners of station/stream names, req pyfiglet:

         _______                      _______ ___ ___  _______
        |   _   .-----.--------.---.-|   _   |   Y   ||       .--.--.-----.-----.----.
        |   1___|  _  |        |  _  |.  1___|.      ||.|   | |  |  |     |  -__|   _|
        |____   |_____|__|__|__|___._|.  __) |. \_/  |`-|.  |-|_____|__|__|_____|__|
        |:  1   |                    |:  |   |:  |   |  |:  |
        |::.. . |                    |::.|   |::.|:. |  |::.|
        `-------'                    `---'   `--- ---'  `---'
          ______                   _______ _______    _______
         / _____)                 (_______|_______)  (_______)
        ( (____   ___  ____  _____ _____   _  _  _       _ _   _ ____  _____  ____
         \____ \ / _ \|    \(____ |  ___) | ||_|| |     | | | | |  _ \| ___ |/ ___)
         _____) ) |_| | | | / ___ | |     | |   | |     | | |_| | | | | ____| |
        (______/ \___/|_|_|_\_____|_|     |_|   |_|     |_|____/|_| |_|_____)_|

         _______                                 _______         __           __
        |     __|.----.-----.-----.--.--.-----. |     __|.---.-.|  |.---.-.--|  |
        |    |  ||   _|  _  |  _  |  |  |  -__| |__     ||  _  ||  ||  _  |  _  |
        |_______||__| |_____|_____|\___/|_____| |_______||___._||__||___._|_____|

* For ascii art of stream album art, req pillow
* For scrobbling to Last.fm, req pylast
